start:
  name: Start Dimmer Engine
  description: Start the dimmer engine for one or more lights with sine-wave brightness cycling.
  fields:
    lights:
      name: Lights
      description: List of light entity IDs to cycle.
      required: true
      example: "[\"light.living_room\", \"light.bedroom\"]"
      selector:
        entity:
          domain: light
          multiple: true
    period_s:
      name: Period (seconds)
      description: Duration of one complete brightness cycle in seconds.
      required: false
      default: 10
      example: 10
      selector:
        number:
          min: 1
          max: 3600
          step: 0.1
          unit_of_measurement: seconds
          mode: box
    tick_s:
      name: Tick Interval (seconds)
      description: How often to update brightness in seconds.
      required: false
      default: 0.25
      example: 0.25
      selector:
        number:
          min: 0.05
          max: 10
          step: 0.05
          unit_of_measurement: seconds
          mode: box
    min_brightness:
      name: Minimum Brightness
      description: Minimum brightness level (1-255).
      required: false
      default: 3
      example: 3
      selector:
        number:
          min: 1
          max: 255
          step: 1
          mode: slider
    max_brightness:
      name: Maximum Brightness
      description: Maximum brightness level (1-255).
      required: false
      default: 255
      example: 255
      selector:
        number:
          min: 1
          max: 255
          step: 1
          mode: slider
    phase_mode:
      name: Phase Mode
      description: >
        How to calculate the initial phase offset.
        - sync_to_current: Match current brightness at start
        - absolute: Use phase_offset as-is
        - relative: Add phase_offset to time-based phase
      required: false
      default: "sync_to_current"
      example: "sync_to_current"
      selector:
        select:
          options:
            - "sync_to_current"
            - "absolute"
            - "relative"
    phase_offset:
      name: Phase Offset
      description: Phase offset in radians (used with absolute/relative modes).
      required: false
      default: 0
      example: 0
      selector:
        number:
          min: -6.283185307
          max: 6.283185307
          step: 0.01
          mode: box
    sync_group:
      name: Sync Group
      description: >
        When true and phase_mode is sync_to_current, compute phase offset
        from first light and apply to all lights in this call.
      required: false
      default: true
      example: true
      selector:
        boolean:
    min_delta:
      name: Minimum Delta
      description: >
        Minimum brightness difference required before updating the light.
        Helps reduce unnecessary service calls.
      required: false
      default: 1
      example: 1
      selector:
        number:
          min: 1
          max: 50
          step: 1
          mode: box

stop:
  name: Stop Dimmer Engine
  description: Stop the dimmer engine for one or more lights.
  fields:
    lights:
      name: Lights
      description: List of light entity IDs to stop cycling.
      required: true
      example: "[\"light.living_room\", \"light.bedroom\"]"
      selector:
        entity:
          domain: light
          multiple: true

stop_all:
  name: Stop All
  description: Stop the dimmer engine for all lights.

status:
  name: Status
  description: Log the current state of all active dimmer engine entries.
